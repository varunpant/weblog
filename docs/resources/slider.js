var fdSliderController;
(function(){function o(f,g,h,k,j,l,m){this._inp=f;this._hideInput=j;this._min=g[0]||0;this._max=g[1]||0;this._range=this._max-this._min;this._tween=l;this._mouseX=0;this._timer=null;this._classname=k;this._drag=false;this._kbEnabled=true;this._callback=h;this._vertical=m;this._steps=f.tagName.toLowerCase()=="input"?10:f.options.length-1;this._resizeVal=0;this.NS_XHTML="http://www.w3.org/1999/xhtml";this.NS_STATE="http://www.w3.org/2005/07/aaa";this.events={stopevent:function(b){if(b==null)b=document.parentWindow.event;
if(b.stopPropagation){b.stopPropagation();b.preventDefault()}return false},redrawEvent:function(){if(a._vertical&&a.outerWrapper.offsetHeight!=a._resizeVal||!a._vertical&&a.outerWrapper.offsetWidth!=a._resizeVal)a.events.redraw()},redraw:function(){a.locate();try{var b=a.outerWrapper.offsetWidth,c=a.outerWrapper.offsetHeight,d=a.handle.offsetWidth,e=a.handle.offsetHeight,i=a.bar.offsetHeight,p=a.bar.offsetWidth,n=a._steps;if(a._vertical){a.bar.style.height=Math.round(c-e)+"px";a.bar.style.left=Math.floor((b-
p)/2)+"px";a.bar.style.top=Math.round(e/2)+"px";a._incPx=(c-e)/n<1?1:(c-e)/n}else{a.bar.style.width=Math.round(b-d)+"px";a.bar.style.left=Math.round(d/2)+"px";a.bar.style.top=Math.floor((c-i)/2)+"px";a._incPx=(b-d)/n<1?1:(b-d)/n}a.resetHandlePosition();a._resizeVal=a._vertical?c:b}catch(q){}},onfocus:function(){a.outerWrapper.className=a.outerWrapper.className.replace("focused","")+" focused";fdSliderController.addEvent(window,"DOMMouseScroll",a.events.trackmousewheel);fdSliderController.addEvent(document,
"mousewheel",a.events.trackmousewheel);window.opera||fdSliderController.addEvent(window,"mousewheel",a.events.trackmousewheel);a.doCallback()},onblur:function(){a.outerWrapper.className=a.outerWrapper.className.replace(/focused|fd-fc-slider-hover|fd-slider-hover/g,"");fdSliderController.removeEvent(document,"mousewheel",a.events.trackmousewheel);fdSliderController.removeEvent(window,"DOMMouseScroll",a.events.trackmousewheel);window.opera||fdSliderController.removeEvent(window,"mousewheel",a.events.trackmousewheel)},
trackmousewheel:function(b){if(a._kbEnabled){var c=0;b=b||window.event;if(b.wheelDelta){c=b.wheelDelta/120;if(window.opera&&window.opera.version()<9.2)c=-c}else if(b.detail)c=-b.detail/3;if(c){var d=a._vertical?a.handle.offsetTop:a.handle.offsetLeft,e=a._vertical?a.outerWrapper.offsetHeight-a.handle.offsetHeight:a.outerWrapper.offsetWidth-a.handle.offsetWidth,i=a._inp.tagName.toLowerCase()=="input"?Math.round(a._incPx/2)<1?1:Math.round(a._incPx/2):a._incPx;if(a._vertical)i=-i;if(c<0){d+=i;d=Math.ceil(d)}else{d-=
i;d=Math.floor(d)}if(d<0)d=0;else if(d>e)d=e;if(a._vertical)a.handle.style.top=d+"px";else a.handle.style.left=d+"px";a.updateInput(d)}return a.events.stopevent(b)}},onkeypress:function(b){if(b==null)b=document.parentWindow.event;if(b.keyCode>=35&&b.keyCode<=40||!a._kbEnabled)return a.events.stopevent(b)},onkeydown:function(b){if(!a._kbEnabled)return true;if(b==null)b=document.parentWindow.event;var c=b.keyCode!=null?b.keyCode:b.charCode;if(c<35||c>40)return true;var d=a._vertical?a.handle.offsetTop:
a.handle.offsetLeft,e=a._vertical?a.outerWrapper.offsetHeight-a.handle.offsetHeight:a.outerWrapper.offsetWidth-a.handle.offsetWidth,i=a._inp.tagName.toLowerCase()=="input"?Math.round(a._incPx/2)<1?1:Math.round(a._incPx/2):a._incPx;if(a._vertical)i=-i;if(c==37||c==40){d-=i;d=Math.floor(d)}else if(c==39||c==38){d+=i;d=Math.ceil(d)}else if(c==35)d=e;else if(c==36)d=0;if(d<0)d=0;else if(d>e)d=e;a.handle.style[a._vertical?"top":"left"]=d+"px";a.updateInput(d);return a.events.stopevent(b)},onchange:function(){a.resetHandlePosition();
a.doCallback();return true},onmouseover:function(){this.className=this.className.replace(/fd\-slider\-hover/g,"")+" fd-slider-hover"},onmouseout:function(){this.className=this.className.replace(/fd\-slider\-hover/g,"")},onHmouseup:function(b){b=b||window.event;fdSliderController.removeEvent(document,"mousemove",a.events.trackmouse);fdSliderController.removeEvent(document,"mouseup",a.events.onHmouseup);a._drag=false;a._kbEnabled=true;if(window.opera)try{setTimeout(function(){a.events.onfocus()},0)}catch(c){}return a.events.stopevent(b)},
onHmousedown:function(b){b=b||window.event;a._mouseX=a._vertical?b.clientY:b.clientX;a.handleX=parseInt(a._vertical?a.handle.offsetTop:a.handle.offsetLeft)||0;a._drag=true;a._kbEnabled=false;fdSliderController.addEvent(document,"mousemove",a.events.trackmouse);fdSliderController.addEvent(document,"mouseup",a.events.onHmouseup);if(window.devicePixelRatio||document.all&&!window.opera)try{setTimeout(function(){a.handle.focus()},0)}catch(c){}},onmouseup:function(b){b=b||window.event;fdSliderController.removeEvent(document,
"mouseup",a.events.onmouseup);if(!a._tween){clearTimeout(a._timer);a._timer=null;a._kbEnabled=true}a.doCallback();return a.events.stopevent(b)},trackmouse:function(b){if(!b)b=window.event;b=a._vertical?a.handleX+(b.clientY-a._mouseX):a.handleX+(b.clientX-a._mouseX);if(b<0)b=0;var c=a._vertical?a.outerWrapper.offsetHeight-a.handle.offsetHeight:a.outerWrapper.offsetWidth-a.handle.offsetWidth;if(b>c)b=c;if(a._vertical)a.handle.style.top=b+"px";else a.handle.style.left=b+"px";a.updateInput(b)},onmousedown:function(b){var c;
if(!b)b=window.event;if(b.target)c=b.target;else if(b.srcElement)c=b.srcElement;if(c.nodeType==3)c=c.parentNode;if(c.className.search("fd-slider-handle")!=-1)return true;try{setTimeout(function(){a.handle.focus()},0)}catch(d){}clearTimeout(a._timer);a._timer=null;a._kbEnabled=false;a.locate();a._drag=false;var e=c=0,i=0;if(document.documentElement&&document.documentElement.scrollTop){i=document.documentElement.scrollTop;e=document.documentElement.scrollLeft}else if(document.body){i=document.body.scrollTop;
e=document.body.scrollLeft}if(b.pageX)c=a._vertical?b.pageY:b.pageX;else if(b.clientX)c=a._vertical?b.clientY+i:b.clientX+e;b=Math.round(a._vertical?a.handle.offsetHeight/2:a.handle.offsetWidth/2);c-=a._vertical?a._y+b:a._x+b;if(c<0)c=0;else if(!a._vertical&&c>a.outerWrapper.offsetWidth-a.handle.offsetWidth)c=a.outerWrapper.offsetWidth-a.handle.offsetWidth;else if(a._vertical&&c>a.outerWrapper.offsetHeight-a.handle.offsetHeight)c=a.outerWrapper.offsetHeight-a.handle.offsetHeight;if(a._tween)a.tweenTo(c);
else{fdSliderController.addEvent(document,"mouseup",a.events.onmouseup);a._posx=c;a.onTimer()}}};this.onTimer=function(){var b=a._vertical?a.handle.offsetTop:a.handle.offsetLeft;if(a._posx<b){b-=a._incPx;b=Math.floor(b);if(b<a._posx)b=a._posx}else{b+=a._incPx;b=Math.ceil(b);if(b>a._posx)b=a._posx}b=Math.round(b);a.handle.style[a._vertical?"top":"left"]=b+"px";a.updateInput(b);if(b!=a._posx)a._timer=setTimeout(a.onTimer,200);else a._kbEnabled=true};this.locate=function(){var b=0,c=0,d=a.outerWrapper;
try{for(;d.offsetParent;){b+=d.offsetLeft;c+=d.offsetTop;d=d.offsetParent}}catch(e){}a._x=b;a._y=c};this.tweenTo=function(b){a._kbEnabled=false;a._tweenX=parseInt(b);a._tweenB=parseInt(a._vertical?a.handle.style.top:a.handle.style.left);a._tweenC=a._tweenX-a._tweenB;a._tweenD=20;a._frame=0;if(!a._timer)a._timer=setTimeout(a.tween,50)};this.tween=function(){a._frame++;var b=a._tweenC,c=a._frame,d=a._tweenB;b=Math.ceil(c==20?d+b:b*(-Math.pow(2,-10*c/20)+1)+d);a.handle.style[a._vertical?"top":"left"]=
b+"px";a.updateInput(b);if(c!=20&&!a._md)a._timer=setTimeout(a.tween,20);else{a.handle.style[a._vertical?"top":"left"]=a._tweenX+"px";clearTimeout(a._timer);a._timer=null;a._kbEnabled=true}};this.updateInput=function(b){var c=(a._vertical?a.outerWrapper.offsetHeight-a.handle.offsetHeight:a.outerWrapper.offsetWidth-a.handle.offsetWidth)/a._range;b=Number(a._min)+Math.abs(Math.floor(b/c));if(a._vertical)b=-b;if(b<a._min)b=a._min;else if(b>a._max)b=a._max;b=b<=a._min+a._max/2?Math.round(b):Math.ceil(b);
a.setInputValue(b);a.doCallback()};this.setInputValue=function(b){if(a._inp.tagName.toLowerCase()=="select")try{a._inp.options[b].selected=true;a.setAttrNS(a.handle,a.NS_STATE,"valuenow",a._inp.options[b].value);a.setAttrNS(a.handle,a.NS_STATE,"valuetext",a._inp.options[b].text)}catch(c){}else{a._inp.value=b;a.setAttrNS(a.handle,a.NS_STATE,"valuenow",b);a.setAttrNS(a.handle,a.NS_STATE,"valuetext",b)}};this.doCallback=function(){if(a._callback){var b;if(a._callback.indexOf(".")!=-1){var c=a._callback.split(".");
b=window;for(var d=0,e;e=c[d];d++)if(e in b)b=b[e];else{b="";break}}else if(a._callback in window)b=window[a._callback];typeof b=="function"&&b()}};this.resetHandlePosition=function(){var b=a._inp.tagName.toLowerCase()=="input"?parseInt(a._inp.value,10):a._inp.selectedIndex;if(isNaN(b)||b<a._min)b=a._min;else if(b>a._max)b=a._max;a.setInputValue(b);var c=a._vertical?a.outerWrapper.offsetHeight-a.handle.offsetHeight:a.outerWrapper.offsetWidth-a.handle.offsetWidth,d=c/a._range;b=b-a._min;d=b*d<a._min+
a._range/2?Math.floor(b*d):Math.ceil(b*d);if(a._vertical)a.handle.style.top=Math.abs(c-d)+"px";else a.handle.style.left=d+"px"};this.setAttrNS=function(b,c,d,e){typeof document.documentElement.setAttributeNS!="undefined"?b.setAttributeNS(c,d,e):b.setAttribute({"http://www.w3.org/1999/xhtml":"x:","http://www.w3.org/2005/07/aaa":"aaa:"}[c]+d,e)};this.findLabel=function(){var b;if(a._inp.parentNode&&a._inp.parentNode.tagName.toLowerCase()=="label")b=a._inp.parentNode;else for(var c=document.getElementsByTagName("label"),
d=0;d<c.length;d++)if(c[d].htmlFor&&c[d].htmlFor==a._inp.id||c[d].getAttribute("for")==a._inp.id){b=c[d];break}if(b&&!b.id)b.id=f.id+"_label_"+fdSliderController.uniqueid++;return b};this.build=function(){if(a._hideInput)a._inp.style.display="none";else fdSliderController.addEvent(a._inp,"change",a.events.onchange);a.outerWrapper=document.createElement("div");a.outerWrapper.className="fd-slider"+(a._vertical?"-vertical ":" ")+a._classname;a.outerWrapper.id="fd-slider-"+f.id;a.wrapper=document.createElement("span");
a.wrapper.className="fd-slider-inner";a.bar=document.createElement("span");a.bar.className="fd-slider-bar";a.handle=document.createElement("button");a.handle.className="fd-slider-handle";a.handle.appendChild(document.createTextNode(" "));a.handle.setAttribute("type","button");a.handle.setAttribute("tabindex","0");a.outerWrapper.appendChild(a.wrapper);a.outerWrapper.appendChild(a.bar);a.outerWrapper.appendChild(a.handle);a._inp.parentNode.insertBefore(a.outerWrapper,a._inp);a.handle.setAttribute("tabindex",
"0");fdSliderController.addEvent(a.outerWrapper,"mouseover",a.events.onmouseover);fdSliderController.addEvent(a.outerWrapper,"mouseout",a.events.onmouseout);fdSliderController.addEvent(a.outerWrapper,"mousedown",a.events.onmousedown);fdSliderController.addEvent(a.handle,"keydown",a.events.onkeydown);fdSliderController.addEvent(a.handle,"keypress",a.events.onkeypress);fdSliderController.addEvent(a.handle,"focus",a.events.onfocus);fdSliderController.addEvent(a.handle,"blur",a.events.onblur);fdSliderController.addEvent(a.handle,
"mousedown",a.events.onHmousedown);fdSliderController.addEvent(a.handle,"mouseup",a.events.onHmouseup);fdSliderController.addEvent(window,"resize",a.events.redrawEvent);a.setAttrNS(a.handle,a.NS_XHTML,"role","wairole:slider");a.setAttrNS(a.handle,a.NS_STATE,"valuemin",a._min);a.setAttrNS(a.handle,a.NS_STATE,"valuemax",a._max);var b=a.findLabel();if(b){a.setAttrNS(a.handle,a.NS_STATE,"labelledby",b.id);a.handle.id="fd-slider-handle-"+f.id;b.setAttribute("for",a.handle.id)}document.getElementById("fd_slider_describedby")&&
a.setAttrNS(a.handle,a.NS_STATE,"describedby","fd_slider_describedby");a.events.redraw()};this.destroy=function(){try{a._callback=null;fdSliderController.removeEvent(a.outerWrapper,"mouseover",a.events.onmouseover);fdSliderController.removeEvent(a.outerWrapper,"mouseout",a.events.onmouseout);fdSliderController.removeEvent(a.outerWrapper,"mousedown",a.events.onmousedown);fdSliderController.removeEvent(a.handle,"keydown",a.events.onkeydown);fdSliderController.removeEvent(a.handle,"keypress",a.events.onkeypress);
fdSliderController.removeEvent(a.handle,"focus",a.events.onfocus);fdSliderController.removeEvent(a.handle,"blur",a.events.onblur);fdSliderController.removeEvent(a.handle,"mousedown",a.events.onHmousedown);fdSliderController.removeEvent(a.handle,"mouseup",a.events.onHmouseup);fdSliderController.removeEvent(window,"resize",a.events.redraw);if(window.addEventListener&&!window.devicePixelRatio)window.removeEventListener("DOMMouseScroll",a.events.trackmousewheel,false);else{fdSliderController.removeEvent(document,
"mousewheel",a.events.trackmousewheel);fdSliderController.removeEvent(window,"mousewheel",a.events.trackmousewheel)}}catch(b){}a.wrapper=a.bar=a.handle=a.outerWrapper=a._timer=null};var a=this;a.build()}fdSliderController={sliders:{},uniqueid:0,forms:{},addEvent:function(f,g,h){if(f.attachEvent){f["e"+g+h]=h;f[g+h]=function(){f["e"+g+h](window.event)};f.attachEvent("on"+g,f[g+h])}else f.addEventListener(g,h,true)},removeEvent:function(f,g,h){if(f.detachEvent)try{f.detachEvent("on"+g,f[g+h]);f[g+h]=
null}catch(k){}else f.removeEventListener(g,h,true)},onload:function(){for(slider in fdSliderController.sliders)fdSliderController.sliders[slider].resetHandlePosition()},joinNodeLists:function(){if(!arguments.length)return[];for(var f=[],g=0;g<arguments.length;g++)for(var h=0,k;k=arguments[g][h];h++)f[f.length]=k;return f},construct:function(){for(var f=/fd_range_([-]{0,1}[0-9]+){1}_([-]{0,1}[0-9]+){1}/,g=/fd_callback_([\S-]+)/,h=/fd_classname_([a-zA-Z0-9_\-]+)/,k=fdSliderController.joinNodeLists(document.getElementsByTagName("input"),
document.getElementsByTagName("select")),j,l,m,a,b,c,d=0,e;e=k[d];d++)if(e.tagName.toLowerCase()=="input"&&e.type=="text"&&e.className&&e.className.search(f)!=-1||e.tagName.toLowerCase()=="select"&&e.className.search(/fd_slider/)!=-1){e.id||fdSliderController.uniqueid++;if(!document.getElementById("fd-slider-"+e.id)){if(e.tagName.toLowerCase()=="select"){j=[0,e.options.length-1];a=true}else{j=e.className.match(f);j=[j[1],j[2]];a=e.className.search(/fd_hide_input/ig)!=-1}l=e.className.search(g)!=-1?
e.className.match(g)[1].replace("-","."):"";m=e.className.search(h)!=-1?e.className.match(h)[1]:"";b=e.className.search(/fd_tween/ig)!=-1;c=e.className.search(/fd_vertical/ig)!=-1;fdSliderController.sliders[e.id]=new o(e,j,l,m,a,b,c)}}},deconstruct:function(){for(slider in fdSliderController.sliders)fdSliderController.sliders[slider].destroy();fdSliderController.sliders=null;fdSliderController.removeEvent(window,"load",fdSliderController.construct);fdSliderController.removeEvent(window,"unload",fdSliderController.deconstruct)}}})();
fdSliderController.addEvent(window,"unload",fdSliderController.deconstruct);fdSliderController.addEvent(window,"load",fdSliderController.construct);