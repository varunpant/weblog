<!doctype html><html lang=en><head><title>HTML Geolocation and Altitude :: Varun Pant — WebLog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="HTML5 Geolocation is a feature which allows the browser on a computer or a mobile phone, to acquire the position from the wifi,2g/3g/4g network or GPS.
The HTML Geolocation API is used to get the geographical position of a user. Since this can compromise user privacy, the position is not available unless the user approves it. The simplest way to use it through navigator.geolocation object if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(showPosition); function showPosition(position) { alert(position."><meta name=keywords content="Cloud,maps,GIS,Google Cloud,Google Maps,Openlayer,Javascript,go,Hadoop,BigData,Spark"><meta name=robots content="noodp"><link rel=canonical href=/posts/html-geolocation-and-altitude/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/img/favicon.png><meta name=twitter:card content="summary"><meta name=twitter:title content="HTML Geolocation and Altitude"><meta name=twitter:description content="HTML5 Geolocation is a feature which allows the browser on a computer or a mobile phone, to acquire the position from the wifi,2g/3g/4g network or GPS.
The HTML Geolocation API is used to get the geographical position of a user. Since this can compromise user privacy, the position is not available unless the user approves it. The simplest way to use it through navigator.geolocation object if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(showPosition); function showPosition(position) { alert(position."><meta property="og:title" content="HTML Geolocation and Altitude"><meta property="og:description" content="HTML5 Geolocation is a feature which allows the browser on a computer or a mobile phone, to acquire the position from the wifi,2g/3g/4g network or GPS.
The HTML Geolocation API is used to get the geographical position of a user. Since this can compromise user privacy, the position is not available unless the user approves it. The simplest way to use it through navigator.geolocation object if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(showPosition); function showPosition(position) { alert(position."><meta property="og:type" content="article"><meta property="og:url" content="/posts/html-geolocation-and-altitude/"><meta property="article:published_time" content="2014-12-21T00:00:00+00:00"><meta property="article:modified_time" content="2014-12-21T00:00:00+00:00"><meta property="og:site_name" content="Varun Pant"></head><body><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Varun Pant</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archives>Archives</a></li><li><a href=/feed.xml>Feed</a></li><li><a href=/showcase>Showcase</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archives>Archives</a></li><li><a href=/feed.xml>Feed</a></li><li><a href=/showcase>Showcase</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h2 class=post-title><a href=/posts/html-geolocation-and-altitude/>HTML Geolocation and Altitude</a></h2><div class=post-meta><span class=post-date>2014-12-21</span>
<span class=post-author>— Varun Pant</span>
<span class=post-read-time>— 3 min read</span></div><div class=post-content><p>HTML5 Geolocation is a feature which allows the browser on a computer or a mobile phone, to acquire the position from the wifi,2g/3g/4g network or GPS.</p><p>The HTML Geolocation API is used to get the geographical position of a user. Since this can compromise user privacy, the position is not available unless the user approves it. The simplest way to use it through navigator.geolocation object if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(showPosition); function showPosition(position) { alert(position.coords.latitude + " , " + position.coords.longitude); }</p><p>The latitude and longitude are available to JavaScript on the page, which in turn can send it back to the remote web server and do fancy location-aware things like finding local businesses or showing your location on a map, geofencing and a lot more.</p><p>The position object contains few more intresting parameters, but are generally available only when in use in smart phones as those devices are equipped with supporting hardware. Here is a table with detailed information. Position Object PropertyTypeNotes coords.latitudedoubledecimal degrees coords.longitudedoubledecimal degrees coords.altitudedouble or nullmeters above the <a href=http://en.wikipedia.org/wiki/Reference_ellipsoid>reference ellipsoid</a> coords.accuracydoublemeters coords.altitudeAccuracydouble or nullmeters coords.headingdouble or nulldegrees clockwise from <a href=http://en.wikipedia.org/wiki/True_north>true north</a> coords.speeddouble or nullmeters/second timestampDOMTimeStamplike a Date() object</p><h3 id=handling-errors-and-rejections>Handling Errors and Rejections</h3><p>The second parameter of the getCurrentPosition() method is used to handle errors. It specifies a function to run if it fails to get the user's location. function showError(error) { switch(error.code) { case error.PERMISSION_DENIED: x.innerHTML = &ldquo;User denied the request for Geolocation.&rdquo; break; case error.POSITION_UNAVAILABLE: x.innerHTML = &ldquo;Location information is unavailable.&rdquo; break; case error.TIMEOUT: x.innerHTML = &ldquo;The request to get user location timed out.&rdquo; break; case error.UNKNOWN_ERROR: x.innerHTML = &ldquo;An unknown error occurred.&rdquo; break; } }</p><p>Some popular mobile devices — like the iPhone and Android phones — support two methods of figuring out where you are. The first method triangulates your position based on your relative proximity to different cellular towers operated by your phone carrier. This method is fast and doesn’t require any dedicated GPS hardware, but it only gives you a rough idea of where you are. Depending on how many cell towers are in your area, “a rough idea” could be as little as one city block or as much as a kilometer in every direction. The second method actually uses dedicated GPS hardware on your device to talk to dedicated GPS positioning satellites that are orbiting the Earth. GPS can usually pinpoint your location within a few meters. The downside is that the dedicated GPS chip on your device draws a lot of power, so phones and other general purpose mobile devices usually turn off the chip until it’s needed. That means there will be a startup delay while the chip is initializing its connection with the GPS satellites in the sky. If you’ve ever used Google Maps on an iPhone or other smartphone, you’ve seen both methods in action. First you see a large circle that approximates your position (finding the nearest cell tower), then a smaller circle (triangulating with other cell towers), then a single dot with an exaction position (given by GPS satellites).</p><p>The getCurrentPosition() function has an optional third argument, a PositionOptions object. There are three properties you can set in a PositionOptions object. All the properties are optional. You can set any or all or none of them. navigator.geolocation.getCurrentPosition(showPosition,{enableHighAccuracy:true, maximumAge:30000, timeout:27000});</p><p>Generally one would constantly need to acquire the current position of the device, for such a usecase there is another built in method called watchPosition The sinature will remind you of setTimeout and clearTimeout built in methods. //This will start calling showPosition in a timedout manner where variable wpid acts as a reference. var wpid=navigator.geolocation.watchPosition(showPosition, geo_error, {enableHighAccuracy:true, maximumAge:30000, timeout:27000}); //If you wanna stop the loop. //navigator.geolocation.clearWatch(wpid); // wpid=false; Finally there is a full working example <a href=http://www.varunpant.com/static/resources/google/geolocation.html>here</a>.</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/merge-multiple-shapefiles-using-ogr2ogr-in-windows-linux-or-osx/><span class=button__icon>←</span>
<span class=button__text>Merge multiple Shapefiles using OGR2OGR in windows Linux or OSX</span></a></span>
<span class="button next"><a href=/posts/classes-and-inheritance-in-ecmascript-6-es6-harmony/><span class=button__text>Classes and Inheritance in EcmaScript 6 (ES6 Harmony)</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Varun Pant</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2019 Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by <a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=/assets/main.js></script><script src=/assets/prism.js></script></div></body></html>