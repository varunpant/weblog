<!doctype html><html lang=en><head><title>Merge multiple Shapefiles using OGR2OGR in windows Linux or OSX :: Varun Pant — WebLog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Introduction This post is aimed at providing assistance to folks who are trying to merge many shapefiles into one single file in either windows or linux environment. Stuff like this may seem obvious to power users of GDAL/OGR, but not to those that are just new to using these great free tools.
Merging Shape (*.shp) Files on Windows Essentially, these commands will grab every shapefile in a directory, and merge them into a single file called “merged."><meta name=keywords content="Cloud,maps,GIS,Google Cloud,Google Maps,Openlayer,Javascript,go,Hadoop,BigData,Spark"><meta name=robots content="noodp"><link rel=canonical href=https://varunpant.com/posts/merge-multiple-shapefiles-using-ogr2ogr-in-windows-linux-or-osx/><link rel=stylesheet href=https://varunpant.com/assets/style.css><link rel=stylesheet href=https://varunpant.com/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://varunpant.com/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://varunpant.com/img/favicon.png><meta name=twitter:card content="summary"><meta name=twitter:title content="Merge multiple Shapefiles using OGR2OGR in windows Linux or OSX"><meta name=twitter:description content="Introduction This post is aimed at providing assistance to folks who are trying to merge many shapefiles into one single file in either windows or linux environment. Stuff like this may seem obvious to power users of GDAL/OGR, but not to those that are just new to using these great free tools.
Merging Shape (*.shp) Files on Windows Essentially, these commands will grab every shapefile in a directory, and merge them into a single file called “merged."><meta property="og:title" content="Merge multiple Shapefiles using OGR2OGR in windows Linux or OSX"><meta property="og:description" content="Introduction This post is aimed at providing assistance to folks who are trying to merge many shapefiles into one single file in either windows or linux environment. Stuff like this may seem obvious to power users of GDAL/OGR, but not to those that are just new to using these great free tools.
Merging Shape (*.shp) Files on Windows Essentially, these commands will grab every shapefile in a directory, and merge them into a single file called “merged."><meta property="og:type" content="article"><meta property="og:url" content="https://varunpant.com/posts/merge-multiple-shapefiles-using-ogr2ogr-in-windows-linux-or-osx/"><meta property="article:published_time" content="2014-12-22T00:00:00+00:00"><meta property="article:modified_time" content="2014-12-22T00:00:00+00:00"><meta property="og:site_name" content="Varun Pant"></head><body><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Varun Pant</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archives>Archives</a></li><li><a href=/feed.xml>Feed</a></li><li><a href=/showcase>Showcase</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archives>Archives</a></li><li><a href=/feed.xml>Feed</a></li><li><a href=/showcase>Showcase</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h2 class=post-title><a href=https://varunpant.com/posts/merge-multiple-shapefiles-using-ogr2ogr-in-windows-linux-or-osx/>Merge multiple Shapefiles using OGR2OGR in windows Linux or OSX</a></h2><div class=post-meta><span class=post-date>2014-12-22</span>
<span class=post-author>— Varun Pant</span>
<span class=post-read-time>— 2 min read</span></div><div class=post-content><h3 id=introduction>Introduction</h3><p>This post is aimed at providing assistance to folks who are trying to merge many shapefiles into one single file in either windows or linux environment. Stuff like this may seem obvious to power users of GDAL/OGR, but not to those that are just new to using these great free tools.</p><h3 id=merging-shape-shp-files-on-windows>Merging Shape (*.shp) Files on Windows</h3><p>Essentially, these commands will grab every shapefile in a directory, and merge them into a single file called “merged.shp”.</p><p>for %f in (<em>.shp) do ( if not exist merged.shp ( ogr2ogr -f “esri shapefile” merged.shp %f) else ( ogr2ogr -f “esri shapefile” -update -append merged.shp %f -nln Merged ) ) ### Merging Shape (</em>.shp) Files on OSX or Linux</p><p>In Linux like environment it's even easier than one would imagine. Infact I am quite sure it should be a one liner for windows enviroment as well, will have to try one day :)</p><p>for f in <em>.shp; do ogr2ogr -update -append merged.shp $f -f &ldquo;ESRI Shapefile&rdquo;; done; ### Merging Shape (</em>.shp) Files using QGIS</p><p>Quite frankley I found this method to be the most slow of all, however this has GUI and should be fine for moderate size files.</p><p>Open Qgis and click <strong>Vector</strong> on menu bar, then click on <strong>Data Management Tools</strong> and finally on <strong>Merge shapefiles to one</strong></p><p><img src=http://www.varunpant.com/static/resources/QgisMerge.png alt></p><p>This will open a dialog, which will ask for the input source folder and the destination file name , and thats it, click <strong>OK</strong>to begin the process.</p><p><img src=http://www.varunpant.com/static/resources/qgismergeD.png alt></p><h3 id=creating-index-using-shapeindex>Creating Index using shapeindex</h3><p>After merging shapefiles , its most likely that one would like to create a spatial index. Here is how to do it. Migrate to the folder and execute shapeindex myShapeFileName.shp</p><h3 id=copying-ordinance-survey-vector-map-shape-files-into-singular-folders>Copying Ordinance Survey Vector Map shape files into singular folders</h3><p>Incase you are looking at a help full script to copy all similar named shape files from grid folders into dedicated layer named folders using python then I have a goodie for you import fnmatch import os import shutil import glob from collections import defaultdict groups = defaultdict(list) basedir =&rsquo;/Users/varunpant/Desktop/O vectormap&rsquo; mergeddir = os.path.join(basedir, &lsquo;merged&rsquo;) def copyFiles(src,desti): files = glob.glob(src.replace(&lsquo;shp&rsquo;,'<em>')) for f in files: shutil.copy(f, desti) for root, dirnames, filenames in os.walk(basedir): for filename in fnmatch.filter(filenames, &lsquo;</em>.shp&rsquo;): basename, extension = os.path.splitext(filename) name = basename.split('_')[1] groups[name].append(os.path.join(root, filename)) for group in groups: g = groups[group] directory = os.path.join(mergeddir, group) if not os.path.exists(directory): os.makedirs(directory) for n in g: copyFiles(n,directory) #print n</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://varunpant.com/posts/tilestache-on-google-maps/><span class=button__icon>←</span>
<span class=button__text>Tilestache on google maps</span></a></span>
<span class="button next"><a href=https://varunpant.com/posts/html-geolocation-and-altitude/><span class=button__text>HTML Geolocation and Altitude</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Varun Pant</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2019 Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by <a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://varunpant.com/assets/main.js></script><script src=https://varunpant.com/assets/prism.js></script></div></body></html>