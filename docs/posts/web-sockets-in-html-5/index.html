<!doctype html><html lang=en><head><title>Web Sockets in HTML 5 :: Varun Pant — WebLog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="HTML5 WebSockets, defines a full-duplex communication channel that operates through a single socket over the web. WebSocket is not just another incremental enhancement to conventional HTTP communications, it represents a large advance, especially for real-time, event driven web applications.
Normally when a browser visits a web page, an HTTP request is sent to the web server that hosts that page. The web server acknowledges this request and sends back the response."><meta name=keywords content="Cloud,maps,GIS,Google Cloud,Google Maps,Openlayer,Javascript,go,Hadoop,BigData,Spark"><meta name=robots content="noodp"><link rel=canonical href=https://varunpant.com/posts/web-sockets-in-html-5/><link type=application/opensearchdescription+xml rel=search title="Varun Pant" href=//www.varunpant.com/opensearch.axd><link rel=me type=text/html href="//plus.google.com/108455320594011020517?rel=me"><link rel=me type=text/html href=//varunpant.com/feed><link rel=me type=text/html href=//twitter.com/varunpant><link rel=me type=text/html href=//www.facebook.com/varun.pant><meta name=msvalidate.01 content="B96ED99B0213B547253C91D27272A5E4"><meta name=google-site-verification content="yu9tlev9-FkUUc0UkPrKP-8ren886--1FcSINU0TJDY"><meta http-equiv=x-xrds-location content="//www.myopenid.com/xrds?username=varunpant.myopenid.com"><meta name=syndication content="//feeds.feedburner.com/varun.pant"><link rel=stylesheet href=https://varunpant.com/assets/style.css><link rel=stylesheet href=https://varunpant.com/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://varunpant.com/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://varunpant.com/img/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:title content="Web Sockets in HTML 5"><meta name=twitter:description content="HTML5 WebSockets, defines a full-duplex communication channel that operates through a single socket over the web. WebSocket is not just another incremental enhancement to conventional HTTP communications, it represents a large advance, especially for real-time, event driven web applications.
Normally when a browser visits a web page, an HTTP request is sent to the web server that hosts that page. The web server acknowledges this request and sends back the response."><meta property="og:title" content="Web Sockets in HTML 5"><meta property="og:description" content="HTML5 WebSockets, defines a full-duplex communication channel that operates through a single socket over the web. WebSocket is not just another incremental enhancement to conventional HTTP communications, it represents a large advance, especially for real-time, event driven web applications.
Normally when a browser visits a web page, an HTTP request is sent to the web server that hosts that page. The web server acknowledges this request and sends back the response."><meta property="og:type" content="article"><meta property="og:url" content="https://varunpant.com/posts/web-sockets-in-html-5/"><meta property="article:published_time" content="2011-01-10T00:00:00+00:00"><meta property="article:modified_time" content="2011-01-10T00:00:00+00:00"><meta property="og:site_name" content="Varun Pant"><section><div id=ta class=advert><script type=text/javascript>google_ad_client="ca-pub-1110730152886910";google_ad_slot="7384719372";google_ad_width=468;google_ad_height=60;</script><script type=text/javascript src=//pagead2.googlesyndication.com/pagead/show_ads.js></script></div></section></head><body><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Varun Pant</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archives>Archives</a></li><li><a href=/feed.xml>Feed</a></li><li><a href=/showcase>Showcase</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archives>Archives</a></li><li><a href=/feed.xml>Feed</a></li><li><a href=/showcase>Showcase</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h2 class=post-title><a href=https://varunpant.com/posts/web-sockets-in-html-5/>Web Sockets in HTML 5</a></h2><div class=post-meta><span class=post-date>2011-01-10</span>
<span class=post-author>— Varun Pant</span>
<span class=post-read-time>— 3 min read</span></div><span class=post-tags>#<a href=https://varunpant.com/tags/programming/>programming</a>&nbsp;
#<a href=https://varunpant.com/tags/websockets/>websockets</a>&nbsp;
#<a href=https://varunpant.com/tags/httppush/>httppush</a>&nbsp;
#<a href=https://varunpant.com/tags/.net/>.net</a>&nbsp;
#<a href=https://varunpant.com/tags/javascript/>javascript</a>&nbsp;</span><div class=post-content><p>HTML5 <a href=http://en.wikipedia.org/wiki/WebSockets>WebSockets</a>, defines a full-duplex communication channel that operates through a single socket over the web. <strong>WebSocket</strong> is not just another incremental enhancement to conventional HTTP communications, it represents a large advance, especially for real-time, <a href=http://en.wikipedia.org/wiki/Event-driven_programming>event driven</a> web applications.</p><p>Normally when a browser visits a web page, an HTTP request is sent to the web server that hosts that page. The web server acknowledges this request and sends back the response. In many cases—for example, for stock prices, news reports, ticket sales, traffic patterns, medical device readings, and so on—the response could be stale by the time the browser renders the page.</p><p>Current attempts to provide real-time web applications largely revolve around polling and other server-side push technologies, the most notable of which is &ldquo;<a href=http://en.wikipedia.org/wiki/Comet_(programming)>Comet</a>", which delays the completion of an HTTP response to deliver messages to the client.</p><p>There are many open source implementation of Http Push, one of my personal favorite is <a href=http://www.ape-project.org/>APE</a> i.e. Ajax Push Engine.</p><blockquote><p><strong>Update</strong>: Microsoft has added a small demo of HTML5 support , it comes as an extension to WCF (Windows communication foundation) .The links can be found <a href=http://connect.microsoft.com/VisualStudio/feedback/details/520742/use-of-html-5-web-sockets-for-wcf-duplex-services-and-silverlight>here</a>, <a href=http://html5labs.interoperabilitybridges.com/media/1165/readme.htm>here</a> and <a href=http://msdn.microsoft.com/en-us/magazine/ee309879.aspx>here</a>.</p><p>There is still no news of Microsoft adding this feature in IE 9, at the time of writing this post, only Firefox 4, Chrome 4, Safari 5 and Opera 11 and above have support for this feature.</p></blockquote><blockquote><p><strong>Update</strong>: Due to security flaw Firefox and Opera have disabled their support for Web Sockets, more info can be found <a href=http://www.webmonkey.com/2010/12/security-flaws-force-firefox-opera-to-turn-off-websockets/>here</a>.</p><p>For those interested here is the <a href=http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-03>draft</a> , official <a href=http://websocket.org/>website</a>, the <a href=http://dev.w3.org/html5/websockets/>API</a> and a nice <a href=http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/>tutorial</a>.</p></blockquote><p>To establish a WebSocket connection, the client and server upgrade from the HTTP protocol to the WebSocket protocol during their initial handshake, as shown in below, note that this connection description represents draft 76 of the protocol, the connection handshake may change during future specification revisions.</p><blockquote><p>**From client to server:<br>**GET /demo HTTP/1.1<br>Host: example.com<br>Connection: Upgrade<br>Sec-WebSocket-Key2: 12998 5 Y3 1 .P00<br>Sec-WebSocket-Protocol: sample<br>Upgrade: WebSocket<br>Sec-WebSocket-Key1: 4@1 46546xW%0l 1 5<br>Origin: <a href=http://example.com>http://example.com</a><br>[8-byte security key]</p><p><strong>From server to client</strong>:<br>HTTP/1.1 101 WebSocket Protocol Handshake<br>Upgrade: WebSocket<br>Connection: Upgrade<br>WebSocket-Origin: <a href=http://example.com>http://example.com</a><br>WebSocket-Location: ws://example.com/demo<br>WebSocket-Protocol: sample<br>[16-byte hash response]</p><p>I was trying to find an alternative which is comfortable enough to be used in my pet projects in Microsoft Tech stack, at the time of writing I couldn’t any so I here it is my very own HTTP Web Socket server written in .Net via C#, this implementation does not use WCF and is basically written using HTTP Async Sockets, the client API is pretty straight forward</p></blockquote><pre><code>var url = &quot;ws://localhost:999&amp;rdquo&quot;
var sock = new WebSocket(url);
sock.onopen = function () {
   log(&quot;open&quot;);
   sock.send(&quot;Message….&quot;);
}
sock.onmessage = function (e) {
   log(e.data);
}
sock.onclose = function (e) {
   log(&quot; closed&quot;);
}

</code></pre><p>and that's it!!! I plan to add some more examples and perhaps come with something more concrete later, till then I hope you enjoy using this code sample and enhancing it as you desire.</p><p><a href=http://www.varunpant.com/demo/WebSocketServer.rar>A complete example in c# can be downloaded from here</a></p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://varunpant.com/posts/vps-hosting-past-and-present/><span class=button__icon>←</span>
<span class=button__text>VPS Hosting Past and Present</span></a></span>
<span class="button next"><a href=https://varunpant.com/posts/water-simulation/><span class=button__text>Water Simulation</span>
<span class=button__icon>→</span></a></span></div></div><div id=blog-comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"varunpant"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Varun Pant</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2019 Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by <a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://varunpant.com/assets/main.js></script><script src=https://varunpant.com/assets/prism.js></script><section><div class=advert id=ta2><script type=text/javascript>google_ad_client="ca-pub-1110730152886910";google_ad_slot="1639236970";google_ad_width=728;google_ad_height=90;</script><script type=text/javascript src=//pagead2.googlesyndication.com/pagead/show_ads.js></script></div></section><script id=dsq-count-scr src=//varunpant.disqus.com/count.js async></script></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-16978408-1','auto');ga('send','pageview');}</script></body></html>