<!doctype html><html lang=en><head><title>Ternary search tree :: Varun Pant — WebLog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="In computer science, a ternary search tree is a type of prefix tree where nodes are arranged as a binary search tree. Like other prefix trees, a ternary search tree can be used as an associative map structure with the ability for incremental string search. However, ternary search trees are more space efficient compared to standard prefix trees, at the cost of speed. Common applications for ternary search trees include spell-checking and auto-completion."><meta name=keywords content="Cloud,maps,GIS,Google Cloud,Google Maps,Openlayer,Javascript,go,Hadoop,BigData,Spark"><meta name=robots content="noodp"><link rel=canonical href=https://varunpant.com/posts/ternary-search-tree/><link rel=stylesheet href=https://varunpant.com/assets/style.css><link rel=stylesheet href=https://varunpant.com/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://varunpant.com/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://varunpant.com/img/favicon.png><meta name=twitter:card content="summary"><meta name=twitter:title content="Ternary search tree"><meta name=twitter:description content="In computer science, a ternary search tree is a type of prefix tree where nodes are arranged as a binary search tree. Like other prefix trees, a ternary search tree can be used as an associative map structure with the ability for incremental string search. However, ternary search trees are more space efficient compared to standard prefix trees, at the cost of speed. Common applications for ternary search trees include spell-checking and auto-completion."><meta property="og:title" content="Ternary search tree"><meta property="og:description" content="In computer science, a ternary search tree is a type of prefix tree where nodes are arranged as a binary search tree. Like other prefix trees, a ternary search tree can be used as an associative map structure with the ability for incremental string search. However, ternary search trees are more space efficient compared to standard prefix trees, at the cost of speed. Common applications for ternary search trees include spell-checking and auto-completion."><meta property="og:type" content="article"><meta property="og:url" content="https://varunpant.com/posts/ternary-search-tree/"><meta property="article:published_time" content="2014-01-26T00:00:00+00:00"><meta property="article:modified_time" content="2014-01-26T00:00:00+00:00"><meta property="og:site_name" content="Varun Pant"></head><body><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Varun Pant</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archives>Archives</a></li><li><a href=/feed.xml>Feed</a></li><li><a href=/showcase>Showcase</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archives>Archives</a></li><li><a href=/feed.xml>Feed</a></li><li><a href=/showcase>Showcase</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h2 class=post-title><a href=https://varunpant.com/posts/ternary-search-tree/>Ternary search tree</a></h2><div class=post-meta><span class=post-date>2014-01-26</span>
<span class=post-author>— Varun Pant</span>
<span class=post-read-time>— 3 min read</span></div><div class=post-content><p>In <a href=http://en.wikipedia.org/wiki/Computer_science>computer science</a>, a <strong>ternary search tree</strong> is a type of <a href=http://en.wikipedia.org/wiki/Trie>prefix tree</a> where nodes are arranged as a <a href=http://en.wikipedia.org/wiki/Binary_search_tree>binary search tree</a>. Like other prefix trees, a ternary search tree can be used as an <a href=http://en.wikipedia.org/wiki/Associative_map>associative map</a> structure with the ability for incremental <a href=http://en.wikipedia.org/wiki/String_search>string search</a>. However, ternary search trees are more space efficient compared to standard prefix trees, at the cost of speed. Common applications for ternary search trees include <a href=http://en.wikipedia.org/wiki/Spell-check>spell-checking</a> and <a href=http://en.wikipedia.org/wiki/Auto-completion>auto-completion</a>.</p><p>As with other trie data structures, each node in a ternary search tree represents a prefix of the stored strings. All strings in the middle subtree of a node start with that prefix.</p><p>In this blog post I present a c# version of Ternary Search Tree.</p><h3 id=the-interface>The interface</h3><p>interface ITernaryTree { void Add(string key, T value); bool Contains(string key); System.Collections.Generic.IEnumerable Keys { get; } int Length { get; } System.Collections.Generic.IEnumerable NearSearch(string query, int distance); System.Collections.Generic.IEnumerable PrefixMatch(string prefix); System.Collections.Generic.IEnumerable Search(string prefix); T this[string key] { get; } System.Collections.Generic.IEnumerable WildcardMatch(string pat); } The interface above defines the API for the data structure. Lets take a deeper look.</p><p>void Add(string key, T value) Add a key value pair in the tree. bool Contains(string key) Check whether a key is in tree. IEnumerable Keys Return all keys in the tree. int Length Returns the length of the tree. IEnumerable NearSearch(string query, int distance) Returns all values for keys in the dictionary that are within a given Hamming distance of a query. IEnumerable PrefixMatch(string prefix) Returns all keys starting with a given prefix. IEnumerable Search(string prefix) Searches all values of keys starting with given prefix. T this[string key] Gets the node value with the specified key IEnumerable WildcardMatch(string pat) Returns all keys matching given wilcard pattern.</p><h3 id=the-trie-node>The Trie Node</h3><p>class Node { /// /// character /// internal char c; /// /// The left, middle, and right subtries. /// internal Node left, mid, right; /// /// The value associated . /// internal T value; } The Class is mostly self explanatory, but the key points to note is that it contains three internal node(sub-tries) unlike a traditional trie node.</p><p>Adding node in the data structure</p><p>/// /// Adds the specified key. /// /// The key. /// The value. public void Add(string key, T value) { if (string.IsNullOrEmpty(key)) { throw new InvalidOperationException(&ldquo;Keys cannot be null or empty."); } if (!Contains(key)) N++; root = Add(root, key, value, 0); } /// /// Adds the specified node in the tree. /// /// The Node. /// The key. /// The val. /// The d. /// Node Add(Node node, string key, T value, int charIndex) { char charAtIndex = key[charIndex]; if (node == null) { node = new Node(); node.c = charAtIndex; } if (charAtIndex &lt; node.c) node.left = Add(node.left, key, value, charIndex); else if (charAtIndex > node.c) node.right = Add(node.right, key, value, charIndex); else if (charIndex &lt; key.Length - 1) node.mid = Add(node.mid, key, value, charIndex + 1); else node.value = value; return node; } ### Get</p><p>/// /// Gets the specified x. /// /// The x. /// The key. /// The d. /// Node Get(Node node, string key, int charIndex) { if (node == null) return null; char c = key[charIndex]; if (c &lt; node.c) return Get(node.left, key, charIndex); else if (c > node.c) return Get(node.right, key, charIndex); else if (charIndex &lt; key.Length - 1) return Get(node.mid, key, charIndex + 1); else return node; } and finally</p><h3 id=prefixmatch>PrefixMatch</h3><p>/// /// Returns all keys starting with a given prefix. /// /// The prefix. /// public IEnumerable PrefixMatch(string prefix) { Queue queue = new Queue(); Node node = Get(root, prefix, 0); if (node == null) return queue; if (node.value != null) queue.Enqueue(prefix); Collect(node.mid, prefix, queue); return queue; } To see a complete working example check out the Github page <a href=https://github.com/varunpant/TernaryTree/blob/master/TernaryTree/TernarySearchTree/TernaryTree.cs>here</a>.</p><p>Full repo can be found <a href=https://github.com/varunpant/TernaryTree>here</a>. There is a test web application demonstrating auto suggest included in the project, I will write more about it in a later post.</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://varunpant.com/posts/how-to-make-a-web-crawler-in-python/><span class=button__icon>←</span>
<span class=button__text>how to make a web crawler in python</span></a></span>
<span class="button next"><a href=https://varunpant.com/posts/gheat-java-heat-maps/><span class=button__text>Gheat Java – Heat maps</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Varun Pant</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2019 Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by <a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://varunpant.com/assets/main.js></script><script src=https://varunpant.com/assets/prism.js></script></div></body></html>